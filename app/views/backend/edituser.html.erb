
<% if @getsingleUser.present? %>
            
    <% 
        userid          = @getsingleUser[0]['id']
        first_name      = @getsingleUser[0]['first_name']
        last_name       = @getsingleUser[0]['last_name']
        
        name            = @getsingleUser[0]['first_name'] 
        
        user_name       = @getsingleUser[0]['user_name']
        email           = @getsingleUser[0]['email']
        address         = @getsingleUser[0]['address']
        country         = @getsingleUser[0]['country']
        state           = @getsingleUser[0]['state']
        user_role       = @getsingleUser[0]['user_role']
        user_image      = @getsingleUser[0]['user_image'].to_s
        phone_number    = @getsingleUser[0]['phone_number']
        user_status     = @getsingleUser[0]['user_status']
        register_ip     = @getsingleUser[0]['register_ip']
        last_login_ip   = @getsingleUser[0]['last_login_ip']

        facebook_link   = @getsingleUser[0]['facebook_link']
        linkedin_link   = @getsingleUser[0]['linkedin_link']
        twitter_link    = @getsingleUser[0]['twitter_link']

    %>

<% end %>


<div class="right-content-area">
       <div class="inner-pages-main">
       		<div class="inner-padding-all">
            	<div class="row">
                	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-8 col-lg-offset-2">

                    	<div class="inside-gray-bx">
                        	<div class="heading-two">
                            	<h2>Edit User</h2>
                            </div>
                            
    <%= form_for :edituser, :url => backend_update_user_path, :html => {:multipart => 'true', :id => 'useredit', :name => 'useredit'} do |f| %>  
                            
                            <%= f.hidden_field :userid, value: userid, id: 'userid' %>
                            <% if user_image.present? %>
                            <%= f.hidden_field :hidden_user_image, value: user_image, id: 'hidden_user_image' %>
                            <% else %>
                            <% user_image = 'default' + '.jpg'  %>
                            <%= f.hidden_field :hidden_user_image, value: user_image, id: 'hidden_user_image' %>
                            <% end %>
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>Name:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                   <%= f.text_field :name, id: 'name', class: 'form-control', value: name, :onkeyup => 'removevalidations(this)', :onblur => 'removevalidations(this)', :ondrop => "return false", :onpaste => "return false" %>
                                    
                                </div>
                            </div>
            <!--Error Message-->
            <span id="name1" class="alert alert-danger custom" style="display:none">Field is required.</span>
            <span id="name3" class="alert alert-danger custom" style="display:none">Only characters are allowed.</span> 
             <!--Error Message Ends-->                                    
                            </div>
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>User Name:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%= f.text_field :username, id: 'username', class: 'form-control', value: user_name, :onkeyup => 'removevalidations(this)', :onblur => 'removevalidations(this)', :ondrop => "return false", :onpaste => "return false" %>
                                    
                                </div>
                            </div>
            <!--Error Message-->
    <span id="username1" class="alert alert-danger custom" style="display:none">Field is required.</span> 
            <span id="username3" class="alert alert-danger custom" style="display:none">Special Characters not allowed.</span>                               
             <!--Error Message Ends-->                                 
                            </div>
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>Email Address:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                 <%= f.text_field :useremail, id: 'useremail', class: 'form-control', value: email, :onkeyup => 'removevalidations(this)', :onblur => 'removevalidations(this)' %>
                                    
                                </div>
                            </div>
            <!--Error Message-->
            <span id="useremail1" class="alert alert-danger custom" style="display:none">Field is required.</span> 
            <span id="useremailvalidError" class="alert alert-danger custom" style="display:none">Valid email required.</span> 
             <!--Error Message Ends-->                                
                            </div>
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>Address:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%= f.text_field :address, id: 'address', class: 'form-control', value: address, :onkeyup => 'removevalidations(this)', :onblur => 'removevalidations(this)' %>
                                    
                                </div>
                            </div>
            <!--Error Message-->       
            <span id="address1" class="alert alert-danger custom" style="display:none">Field is required.</span>   <!--Error Message-->                                    
                            </div>
                            
                             <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>Contact No:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%= f.text_field :contactno, id: 'contactno', class: 'form-control', value: phone_number, :onkeyup => 'removevalidations(this)', :onblur => 'removevalidations(this)' %>
                                    
                                </div>
                            </div>
<span id="contactno1" class="alert alert-danger custom" style="display:none">Field is required.</span>             <span id="contactno3" class="alert alert-danger custom" style="display:none">Contact number length should between 10 to 12 integers.</span>                                  
                            </div>
                            
                            
    <div class="form-group">
    <div class="row">
    <div class="col-xs-12 col-sm-3 col-md-3"><label>Country:</label></div>
    <div class="col-xs-12 col-sm-9 col-md-9">
    <div class="project-select-main">
    <select class="selectpicker" name="edituser_country" id="country" onchange="removevalidations(this);">

    <!--<option value="">Select Country</option>-->
    <%
    if @allcountriesAndNationalty.present?
    @allcountriesAndNationalty.each_with_index  do |countriesAndNationalty, index|
    %>

    <option  <% if country == countriesAndNationalty.id %> selected="selected" <% end %>  value="<%= countriesAndNationalty.id %>">  <%= countriesAndNationalty.country_name.capitalize %>

    </option>

    <% end %> <!--Endloop -->
    <% end %> <!--EndIf -->

    </select>
    </div>
    </div>
    </div>
    <!--Error Message span -->
    <span id="projecterr" class="alert alert-danger" style="display:none; margin-left:193px;">Field is required.</span>
    </div>
                            
                            
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>State:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%= f.text_field :state, id: 'state', class: 'form-control', value: state, :onkeyup => 'removevalidations(this)', :onblur => 'removevalidations(this)', :ondrop => "return false", :onpaste => "return false" %>
                                
                                </div>
                            </div>
<span id="state1" class="alert alert-danger custom" style="display:none">Field is required.</span>
<span id="state3" class="alert alert-danger custom" style="display:none">Only characters are allowed.</span>                                
                            </div>
                            
<!--
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>User Role:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%#= f.text_field :userrole, id: 'userrole', class: 'form-control', value: user_role, :onkeyup => 'removevalidations(this)', :onblur => 'removevalidations(this)' %>
                                    
                                </div>
                            </div>
<span id="userrole1" class="alert alert-danger custom" style="display:none">Field is required.</span>                                     
                            </div>
-->
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>Facebook Link:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%= f.text_field :fb_link, id: 'fb_link', class: 'form-control', value: facebook_link %>
                                    
                                </div>
                            </div>
<span id="fb_link1" class="alert alert-danger custom" style="display:none">Field is required.</span>                                 
                            </div>
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>Twitter Link:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%= f.text_field :twitter_link, id: 'twitter_link', class: 'form-control', value: twitter_link %>
                                    
                                </div>
                            </div>
<span id="twitter_link1" class="alert alert-danger custom" style="display:none">Field is required.</span>                                  
                            </div>
                            
                            <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>LinkedIn Link:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                    
                                    <%= f.text_field :linkedin_link, id: 'linkedin_link', class: 'form-control', value: linkedin_link  %>
                                    
                                </div>
                            </div>
<span id="linkedin_link1" class="alert alert-danger custom" style="display:none">Field is required.</span>                                  
                            </div>
                            
                            
                             <div class="form-group">
                            <div class="row">
                            	<div class="col-xs-12 col-sm-3 col-md-3"><label>Upload image:</label></div>
                                <div class="col-xs-12 col-sm-9 col-md-9">
                                	<div class="upload-img-div">
                                        
                                        <span><i><%= image_tag ('upload-img.png'), :alt => '', onchange: "ValidateSingleInput(this);" %></i>Upload image</span>
                                   
                                        <%= f.file_field :userimage, id: 'userimage', onchange: "ValidateSingleInput(this);" %>
                                        
                                    </div>
                                    
                                    
                                    <!--<div class="upload-img-show">
                                        <img id="image_src" src="/assets/website_logo-a9356860cc605bca9adfa92af29d80c92ec6a64bfbc3de3a8f58e8b764544ddc.png" alt="2d4754a7d262 user">
                                    </div>-->
                                    
                                    <div class="upload-img-show">
                                        

                <% userImage = user_image.to_s %>

                <!-- Code for Image Checking  -->

                <% if userImage.present? %>
                <% if File.exist?(Rails.root.join('app','assets','images','userImages',userImage )) %>
                <% user_pic = userImage  %>
                <% else %>
                <% user_pic = 'default' + '.jpg'  %>
                <% end %>
                                        
                <% else %>
                <% user_pic = 'default' + '.jpg'  %>                                        
                <% end %>                                

                <!-- Code for Image Checking  -->

                <%= image_tag File.join('userImages', user_pic), :id => "image_src" %>

                                        
                                    </div>
                                </div>
                            </div>
                            </div>
                            
                             
                            
                            <div class="row">
                            	
                                <div class="col-xs-12 col-sm-8 col-sm-offset-3 col-md-8 col-md-offset-3">
                                
                                    <%= f.submit :Update, :class => 'login-btn btn-margin-top', :id => 'UpdateUser', :type => 'button' %>
                                    
                                </div>
                            </div>
                            
                            
        <% end %>
                            
                        </div>
                    </div>
                </div>
            </div>
       </div>
        
      
        
    </div>

     <script>
    
    
    $(document).ready(function () {
        
        
        $('#contactno').bind('keyup paste', function()
        {
            this.value = this.value.replace(/[^0-9]/g, '');
        }); 

        
        /*-- Start Update User --*/

        $("#UpdateUser").click(function () {
            
            var userid       = $("#userid").val();
            var errorchecker = 0;
            
            var name = $("#name").val();
            if (name == '') {
 			$("#name1").css('display','block').css('color','#A94442');
            $('html, body').animate({scrollTop: 10}, 1000);                
            errorchecker = 1;               
            }
            
            if(name != '')
            {
                if(!lettersonly(name))
                {
                    $("#name3").css('display','block').css('color','#A94442');	
                    $('html, body').animate({scrollTop: 0 }, 1000);
                    errorchecker = 1;
                }
                else
                {
                    $("#name3").css('display','none');	
                }
            }

            var useremail = $("#useremail").val();
            if (useremail == '') {
			$("#useremail1").css('display','block').css('color','#A94442');
            $('html, body').animate({scrollTop: 10}, 1000);                
            errorchecker = 1;
            }
            
            if( !isEmailAddress(useremail) && useremail != '')
            {
            $("#useremailvalidError").css('display','block').css('color','#A94442').delay(1000).fadeOut();
            $('html, body').animate({scrollTop: 10}, 1000);                
            errorchecker = 1;
            }

            
            var username = $("#username").val();
            if (username === '') {
			$("#username1").css('display','block').css('color','#A94442');
            $('html, body').animate({scrollTop: 10}, 1000);                
            errorchecker = 1;
            }
            
            if(username != '')
            {
            if (!alphanum(username))
            {
            $("#username3").css('display','block').css('color','#A94442');
            $('html, body').animate({scrollTop: 0 }, 1000);            
            errorchecker = 1;
            }
            }


            var address = $("#address").val();
            if (address === '') {
			$("#address1").css('display','block').css('color','#A94442');
            $('html, body').animate({scrollTop: 10}, 1000);                
            errorchecker = 1;
            }

            var contactno = $("#contactno").val();
            if (contactno === '') {
			$("#contactno1").css('display','block').css('color','#A94442');
            $('html, body').animate({scrollTop: 10}, 1000);                
            errorchecker = 1;
		    }

            if(contactno != '')
            {
                if (!isContactNumber(contactno)) {
                    $("#contactno3").css('display','block').css('color','#A94442');
                    $('html, body').animate({scrollTop: 0 }, 1000);
                    errorchecker = 1;
                }
                else if(contactno.length < 10 || contactno.length > 12 )
                {
                    $("#contactno3").css('display','block').css('color','#A94442');
                    $('html, body').animate({scrollTop: 0 }, 1000);
                    errorchecker = 1;
                }        
                else
                {
                    $("#contactno3").css('display','none');
                }
            }


            var country = $("#country").val();
            if (country === '') {
			$("#country1").css('display','block').css('color','#A94442');
            errorchecker = 1;
            }

            var state = $("#state").val();
            if (state === '') {
			$("#state1").css('display','block').css('color','#A94442');
            errorchecker = 1;
            }
            
            
            if(state != '')
            {
                if(!lettersonly(state))
                {
                    $("#state3").css('display','block').css('color','#A94442');	
                    $('html, body').animate({scrollTop: 0 }, 1000);
                    errorchecker = 1;
                }
                else
                {
                    $("#state3").css('display','none');	
                }
            }

            var userrole = $("#userrole").val();
            if (userrole === '') {
			$("#userrole1").css('display','block').css('color','#A94442');
            errorchecker = 1;
            }

            
            var userimage = $("#userimage").val();
            if (userimage === '')
            {
                var userimage = $("#hidden_user_image").val();
            }
            
            
             if(errorchecker > 0)
             {
                return false;
             }
             else
             {
                $("#useredit").submit();          
             }
      
	});


	/*-- End Update User --*/
        
        
        
    });
    

</script>



<!-- Start Image Preview -->

<script>

function readURL(input) {

    if (input.files && input.files[0]) {
        
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#image_src').css('display','block');
            $('#image_src').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}
    

$(document).ready(function() {
        
    $("#userimage").change(function () {
        $('#userimage1').css('display','none');
        readURL(this);
    });
});



</script>

<!-- End Image Preview -->

<script>

document.onkeypress = function (e) {
    if (e.keyCode == 13) {
       $('#UpdateUser').click();
    }
}

</script>